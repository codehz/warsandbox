import{Pass as a,FullScreenQuad as r}from"./Pass.js";import{ShaderMaterial as e,UniformsUtils as f}from"../../web_modules/three.js";export class ShaderPass extends a{constructor(t,s="tDiffuse"){super();this.textureID=s,t instanceof e?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=f.clone(t.uniforms),this.material=new e({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new r(this.material)}render(t,s,i,u,l){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(s),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}
